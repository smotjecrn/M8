(function(){'use strict';var d;var k=function(a){if("function"==typeof a.gwdLoad&&"function"==typeof a.gwdIsLoaded&&!a.gwdIsLoaded()){var b=h(a),c=b&&"function"==typeof b.gwdIsLoaded;(!b||c&&b.gwdIsLoaded())&&a.gwdLoad()}},l=function(a){if(null==a.gwdActivate||"function"==typeof a.gwdActivate)if(null==a.gwdIsActive||!a.gwdIsActive()){var b=h(a),c=b&&null!=b.gwdIsActive&&"function"==typeof b.gwdIsActive;null==b&&a.gwdActivate();c&&b.gwdIsActive()&&a.gwdActivate()}},m=function(a){return"gwd-page"==a.tagName.toLowerCase()||"gwd-page"==
a.getAttribute("is")},h=function(a){if(m(a))return a;for(;a&&9!=a.nodeType;)if((a=a.parentElement)&&m(a))return a;return null},n=function(a){for(var b=[];a;a=a.parentNode)b.unshift(a);return b};var p=function(a,b){setTimeout(a,b)};var q=function(a,b){var c=function(e){a.removeEventListener("playing",c);b(e)};a.addEventListener("playing",c)};var r={s:"fullscreenchange",v:"webkitfullscreenchange",u:"mozfullscreenchange"},t={s:"fullscreenElement",v:"webkitFullscreenElement",u:"mozFullScreenElement"},u=function(a){var b;for(b in t){var c=a[t[b]];if(void 0!==c)break}return c||null},v=function(a){var b=document;this.f="has-fullscreen-gwd-video";this.a=b;this.b=a;this.j=this.A.bind(this)};
v.prototype.A=function(){var a=u(this.a);if(a)if(this.b==a){var b=this.a;for(a=this.b;a&&a!=b;a=a.parentNode)a.classList.add(this.f)}else if(a.classList.contains(this.f)){b=n(this.b);a=n(a);for(var c=0,e=b[0],g=a[0],f=null;e&&g&&e==g;)f=e,c++,e=b[c],g=a[c];w(this,f)}else w(this);else w(this)};v.prototype.install=function(){for(var a in r)this.a.addEventListener(r[a],this.j)};var w=function(a,b){b=b||a.a;for(var c=a.b;c&&c!=b;c=c.parentNode)c.classList.remove(a.f)};var x=function(){};goog.inherits(x,HTMLVideoElement);d=x.prototype;d.createdCallback=function(){this.o=this.w.bind(this);this.l=new v(this);this.g=this.m=!1;this.setAttribute("webkit-playsinline",!0);this.setAttribute("x-webkit-airplay","allow");this.muted=this.hasAttribute("muted");this.i=1;this.h=!1;this.c=this.muted&&-1!=(window.navigator.userAgent||"").indexOf("Android")};
d.attachedCallback=function(){k(this);l(this);this.c&&q(this,function(){this.c&&(this.volume=0)}.bind(this));this.addEventListener("volumechange",this.o,!1);this.l.install()};d.detachedCallback=function(){var a=this.l,b;for(b in r)a.a.removeEventListener(r[b],a.j);a.b==u(a.a)&&w(a);this.c&&(this.volume=1);this.removeEventListener("volumechange",this.o,!1)};
d.attributeChangedCallback=function(a){if("sources"==a){var b=this.paused,c=this.muted;y(this);this.load();p(function(){this.muted=c;b?this.pause():this.play()}.bind(this),0)}};d.gwdActivate=function(){this.autoplay&&this.paused&&p(function(){this.play()}.bind(this),200);this.g=!0};d.gwdDeactivate=function(){this.seek(0);this.pause();this.g=!1};d.gwdIsActive=function(){return this.g};d.gwdLoad=function(){y(this);this.m=!0;var a=document.createEvent("Event");a.initEvent("ready",!0,!0);this.dispatchEvent(a)};
d.gwdIsLoaded=function(){return this.m};d.mute=function(){this.c&&(this.volume=1);this.c=!1;this.muted=!this.muted};d.replay=function(){this.seek(0);this.play()};d.seek=function(a){this.currentTime=a};d.w=function(){!1===this.h&&!0===this.muted&&0===this.i&&(this.volume=1,this.muted=!1);this.i=this.volume;this.h=this.muted};d.setVolume=function(a){this.muted=0<a?!1:!0;this.i=this.volume=a/100;this.h=this.muted};d.setSources=function(a){this.setAttribute("sources",a)};
var y=function(a){var b=a.getAttribute("sources");b=b?b.split(","):[];for(var c;c=a.firstChild;)a.removeChild(c);for(c=0;c<b.length;++c){var e=document.createElement("source"),g=e;var f=b[c];f=f.trim();f=window.Enabler?Enabler.getUrl(f):f;g.src=f;a.appendChild(e)}};document.registerElement("gwd-video",{prototype:x.prototype,"extends":"video"});}).call(this);
